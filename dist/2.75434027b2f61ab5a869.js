(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{209:function(e,a){},213:function(e,a,t){"use strict";t.r(a);var s=t(0),c=t.n(s),r=t(15),n=t(14),l=t(4),m=t(183),o=t.n(m),h=t(3);a.default=function(e){const a=Object(s.useRef)(null),t=Object(s.useRef)(null),m=Object(s.useRef)(null),i=Object(s.useContext)(l.a),u=Object(s.useContext)(n.a),[d,f]=Object(r.a)({chatMessage:[],textField:""});return Object(s.useEffect)(()=>{i.showChat&&t.current.focus()},[i.showChat]),Object(s.useEffect)(()=>(a.current=o()("http://localhost:8080"),a.current.on("chatFromServer",e=>{f(a=>{a.chatMessage.push(e)})}),()=>a.current.disconnect()),[]),Object(s.useEffect)(()=>{m.current.scrollTop=m.current.scrollHeight,!i.showChat&&d.chatMessage.length&&u({type:"increaseUnread"})},[d.chatMessage]),Object(s.useEffect)(()=>{i.showChat&&u({type:"resetUnread"})},[i.showChat]),c.a.createElement("ref",{id:"chat-wrapper",className:"chat-wrapper shadow border-top border-left border-right"+(i.showChat?" chat-wrapper--is-visible":"")},c.a.createElement("div",{className:"chat-title-bar bg-secondary"},"Chat",c.a.createElement("span",{onClick:()=>u({type:"closeChat"}),className:"chat-title-bar-close"},c.a.createElement("i",{className:"fas fa-times-circle"}))),c.a.createElement("div",{ref:m,id:"chat",className:"chat-log"},d.chatMessage.map((e,a)=>e.username==i.user.username?c.a.createElement("div",{key:a,className:"chat-self"},c.a.createElement("div",{className:"chat-message"},c.a.createElement("div",{className:"chat-message-inner"},e.message)),c.a.createElement("img",{className:"chat-avatar avatar-tiny",src:e.avatar})):c.a.createElement(h.a,null,c.a.createElement("div",{key:a,className:"chat-other"},c.a.createElement(h.b,{to:"/profile/"+e.username},c.a.createElement("img",{className:"avatar-tiny",src:e.avatar})),c.a.createElement("div",{className:"chat-message"},c.a.createElement("div",{className:"chat-message-inner"},c.a.createElement(h.b,{to:"/profile/"+e.username},c.a.createElement("strong",null,e.username,": ")),e.message)))))),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a.current.emit("chatFromBrowser",{message:d.textField,token:i.user.token}),f(e=>{e.chatMessage.push({message:d.textField,username:i.user.username,avatar:i.user.avatar}),e.textField=""})},id:"chatForm",className:"chat-form border-top"},c.a.createElement("input",{value:d.textField,ref:t,onChange:function(e){const a=e.target.value;f(e=>{e.textField=a})},type:"text",className:"chat-field",id:"chatField",placeholder:"Type a messageâ€¦",autoComplete:"off"})))}}}]);